<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.smbms.dao.provider.ProviderMapper">
	<resultMap type="Provider" id="providerList">
		<id property="id" column="id" />
		<result property="proName" column="proName" />
		<result property="proCode" column="proCode" />
	</resultMap>
	<!-- 根据id获取供应商信息 -->
	<select id="getProviderById" resultMap="providerList">
		select * from smbms_provider
		where id = #{id}
	</select>
	<!-- 获取供应商列表 -->
	<select id="getProviderList" resultMap="providerList">
		select * from smbms_provider
		<trim prefix="where" prefixOverrides="and | or">
			<if test="proName != null and proName != ''">
				and proName like concat('%',#{proName},'%')
			</if>
			<if test="proCode != null and proCode != ''">
				and proCode like concat('%',#{proCode},'%')
			</if>
		</trim>
		order by creationDate DESC limit #{currentPageNo},#{pageSize}
	</select>
	<!-- 增加供应商列表 -->
	<insert id="add" parameterType="Provider">
		insert into smbms_provider
		(proCode,proName,proDesc,proContact,proPhone,proAddress,proFax,createdBy,creationDate,companyLicPicPath,orgCodePicPath)
		values(#{proCode},#{proName},#{proDesc},#{proContact},#{proPhone},#{proAddress},#{proFax},#{createdBy},#{creationDate},#{companyLicPicPath},#{orgCodePicPath})
	</insert>
	<!-- 更新供应商信息 -->
	<update id="update" parameterType="Provider">
		update smbms_provider 
		set proCode=#{proCode},proName=#{proName},proDesc=#{proDesc},proContact=#{proContact},proPhone=#{proPhone},proAddress=#{proAddress},proFax=#{proFax},
		createdBy=#{createdBy},creationDate=#{creationDate},companyLicPicPath=#{companyLicPicPath},orgCodePicPath=#{orgCodePicPath}
		where id = #{id}
	</update>
	<!-- 删除供应商 -->
	<delete id="delete">
		delete from smbms_provider where id = #{id}
	</delete>
	<!-- 查询总数据 -->
	<select id="getProviderCount" resultType="Integer">
		select count(*) count from smbms_provider
		<trim prefix="where" prefixOverrides="and | or">
			<if test="proName != null and proName != ''">
				and proName like concat('%',#{proName},'%')
			</if>
			<if test="proCode != null and proCode != ''">
				and proCode like concat('%',#{proCode},'%')
			</if>
		</trim>
	</select>
</mapper>